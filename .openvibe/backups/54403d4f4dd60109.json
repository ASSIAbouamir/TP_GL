{
  "id": "54403d4f4dd60109",
  "filePath": "c:\\Users\\Hp\\Desktop\\TP_GL\\pipline.md",
  "timestamp": 1764458558222,
  "originalContent": "# ğŸ”„ Diagramme Visuel du Pipeline\r\n\r\n## Vue d'Ensemble SimplifiÃ©e\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    GÃ‰NÃ‰RATION D'Ã‰CRITURE MANUSCRITE               â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nINPUT: Texte (\"Hello World\")\r\n         â”‚\r\n         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n         â”‚                                   â”‚                          â”‚\r\n         â–¼                                   â–¼                          â–¼\r\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n    â”‚   RNN   â”‚                        â”‚ RENDU  â”‚              â”‚   GAN   â”‚\r\n    â”‚ / LSTM  â”‚ â­ PRINCIPAL           â”‚STYLISÃ‰  â”‚              â”‚ (cGAN)  â”‚\r\n    â”‚         â”‚                        â”‚        â”‚              â”‚ FUTUR   â”‚\r\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n         â”‚                                   â”‚                          â”‚\r\n         â”‚                                   â”‚                          â”‚\r\n         â–¼                                   â–¼                          â–¼\r\n    Strokes gÃ©nÃ©rÃ©s                    Image stylisÃ©e            Image 128Ã—128\r\n    (sÃ©quences [dx,dy,eos])            (polices + effets)        (non implÃ©mentÃ©)\r\n         â”‚                                   â”‚                          â”‚\r\n         â”‚                                   â”‚                          â”‚\r\n         â–¼                                   â”‚                          â”‚\r\n    drawing.draw()                          â”‚                          â”‚\r\n    â†’ Image 128Ã—128                         â”‚                          â”‚\r\n         â”‚                                   â”‚                          â”‚\r\n         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                         â”‚\r\n                         â–¼\r\n                    OUTPUT: Image d'Ã©criture manuscrite\r\n```\r\n\r\n---\r\n\r\n## Pipeline Complet de PrÃ©paration des DonnÃ©es\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    PRÃ‰PARATION DES DONNÃ‰ES                     â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nDataset IAM (Brut)\r\nâ”‚\r\nâ”œâ”€ data/raw/ascii/*.txt\r\nâ”‚  â””â”€ Transcriptions: \"Hello World\"\r\nâ”‚\r\nâ”œâ”€ data/raw/lineStrokes/*.xml\r\nâ”‚  â””â”€ Strokes XML: <Stroke><Point x=\"100\" y=\"200\"/></Stroke>\r\nâ”‚\r\nâ””â”€ data/raw/original-xml/*.xml\r\n   â””â”€ MÃ©tadonnÃ©es: writerID, etc.\r\n\r\n         â”‚\r\n         â”‚ prepare_data.py\r\n         â–¼\r\n\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  TRAITEMENT DES STROKES                                     â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                                                              â”‚\r\nâ”‚  XML â†’ CoordonnÃ©es (x, y, eos)                              â”‚\r\nâ”‚    â”‚                                                         â”‚\r\nâ”‚    â”œâ”€ align()      â†’ Correction inclinaison                 â”‚\r\nâ”‚    â”œâ”€ denoise()     â†’ Lissage Savitzky-Golay                â”‚\r\nâ”‚    â”œâ”€ coords_to_offsets() â†’ Conversion en dÃ©placements      â”‚\r\nâ”‚    â””â”€ normalize()  â†’ Normalisation                         â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  RÃ©sultat: [dx, dy, eos] normalisÃ©s                          â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n         â”‚\r\n         â”‚\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  TRAITEMENT DES TRANSCRIPTIONS                               â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                                                              â”‚\r\nâ”‚  ASCII â†’ Texte brut                                          â”‚\r\nâ”‚    â”‚                                                         â”‚\r\nâ”‚    â””â”€ encode_ascii() â†’ Indices dans alphabet                â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  RÃ©sultat: [char_idx1, char_idx2, ...]                      â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n         â”‚\r\n         â”‚\r\n         â–¼\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  SAUVEGARDE (data/processed/)                                â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                                                              â”‚\r\nâ”‚  x.npy      â†’ Strokes: (N, 1200, 3)                         â”‚\r\nâ”‚  x_len.npy  â†’ Longueurs: (N,)                               â”‚\r\nâ”‚  c.npy      â†’ Transcriptions: (N, 75)                        â”‚\r\nâ”‚  c_len.npy  â†’ Longueurs textes: (N,)                        â”‚\r\nâ”‚  w_id.npy   â†’ IDs Ã©crivains: (N,)                           â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n```\r\n\r\n---\r\n\r\n## Architecture RNN/LSTM â­ PRINCIPALE\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    MODÃˆLE RNN AVEC ATTENTION                    â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nInput:\r\n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n  â”‚ Strokes â”‚         â”‚   Text   â”‚\r\n  â”‚ [dx,dy, â”‚         â”‚ (chars)  â”‚\r\n  â”‚  eos]   â”‚         â”‚          â”‚\r\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n       â”‚                   â”‚\r\n       â”‚                   â–¼\r\n       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n       â”‚            â”‚  One-Hot    â”‚\r\n       â”‚            â”‚  Encoding   â”‚\r\n       â”‚            â”‚  (alphabet) â”‚\r\n       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n       â”‚                   â”‚\r\n       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n               â”‚\r\n               â–¼\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  LSTMAttentionCell (rnn_cell.py)                             â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                                                              â”‚\r\nâ”‚  1. Projection d'Attention                                  â”‚\r\nâ”‚     prev_attention â†’ [mean, max] â†’ tanh(Linear) â†’ [3-D]     â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  2. ConcatÃ©nation Input                                     â”‚\r\nâ”‚     [dx, dy, eos] + attn_proj â†’ [6-D]                      â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  3. LSTM Cell                                               â”‚\r\nâ”‚     LSTMCell(6 â†’ lstm_size)                                 â”‚\r\nâ”‚     â†’ (h, c)                                                â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  4. Calcul Attention                                         â”‚\r\nâ”‚     Mixture de Gaussians sur texte                          â”‚\r\nâ”‚     â†’ attention weights                                     â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  Output: h (hidden state)                                    â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n               â”‚\r\n               â–¼\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  RNN Model (rnn.py)                                          â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                                                              â”‚\r\nâ”‚  1. Free Run RNN                                             â”‚\r\nâ”‚     Pour chaque timestep t:                                  â”‚\r\nâ”‚       input_t = strokes[t]                                   â”‚\r\nâ”‚       h_t, state = cell(input_t, state, attention)           â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  2. GMM Layer                                                â”‚\r\nâ”‚     Linear(lstm_size â†’ output_units)                         â”‚\r\nâ”‚     output_units = K*6 + 1                                  â”‚\r\nâ”‚     (K = output_mixture_components)                          â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  3. Parse Parameters                                         â”‚\r\nâ”‚     â†’ pis (mixing coeffs)                                   â”‚\r\nâ”‚     â†’ mus (means: [mu_x, mu_y])                             â”‚\r\nâ”‚     â†’ sigmas (std devs: [sigma_x, sigma_y])                 â”‚\r\nâ”‚     â†’ rhos (correlations)                                    â”‚\r\nâ”‚     â†’ es (end-of-stroke prob)                               â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  4. Loss (Negative Log Likelihood)                           â”‚\r\nâ”‚     GMM likelihood + Bernoulli likelihood                   â”‚\r\nâ”‚                                                              â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n               â”‚\r\n               â–¼\r\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n        â”‚   Output     â”‚\r\n        â”‚ Strokes:     â”‚\r\n        â”‚ [dx, dy, eos]â”‚\r\n        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n               â”‚\r\n               â–¼\r\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n        â”‚ drawing.draw()â”‚\r\n        â”‚ Strokes â†’    â”‚\r\n        â”‚ Image 128Ã—128 â”‚\r\n        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\n\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚              DÃ‰TAILS DE L'ARCHITECTURE                         â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nCOMPOSANTS PRINCIPAUX:\r\n\r\n1. LSTMAttentionCell (rnn_cell.py)\r\n   â”œâ”€ LSTM Cell: 6 inputs â†’ lstm_size hidden\r\n   â”œâ”€ Attention Projection: [2] â†’ [3]\r\n   â”œâ”€ Attention Parameters: lstm_size â†’ 3*K\r\n   â””â”€ Attention Computation: Mixture of Gaussians\r\n\r\n2. RNN Model (rnn.py)\r\n   â”œâ”€ Free Run: GÃ©nÃ©ration sÃ©quentielle\r\n   â”œâ”€ GMM Layer: lstm_size â†’ (K*6 + 1)\r\n   â”œâ”€ Parameter Parsing: Extraction params GMM\r\n   â””â”€ Loss Function: NLL (GMM + Bernoulli)\r\n\r\n3. OpÃ©rations RNN (rnn_ops.py)\r\n   â”œâ”€ raw_rnn: Boucle RNN gÃ©nÃ©rique\r\n   â”œâ”€ rnn_teacher_force: EntraÃ®nement avec ground truth\r\n   â””â”€ rnn_free_run: GÃ©nÃ©ration autonome\r\n\r\nHYPERPARAMÃˆTRES TYPIQUES:\r\n   â”œâ”€ lstm_size: 400\r\n   â”œâ”€ output_mixture_components: 20\r\n   â”œâ”€ attention_mixture_components: 10\r\n   â””â”€ alphabet_size: ~70 (drawing.alphabet)\r\n```\r\n\r\n---\r\n\r\n## Processus d'EntraÃ®nement RNN/LSTM\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    BOUCLE D'ENTRAÃNEMENT RNN                   â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nPour chaque EPOCH:\r\n    â”‚\r\n    â””â”€ Pour chaque BATCH:\r\n           â”‚\r\n           â”œâ”€ DataReader (rnn.py)\r\n           â”‚  â”‚\r\n           â”‚  â”œâ”€ Charger data/processed/*.npy\r\n           â”‚  â”œâ”€ CrÃ©er batches avec padding\r\n           â”‚  â””â”€ PrÃ©parer (x, y, c, x_len, c_len)\r\n           â”‚\r\n           â–¼\r\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n    â”‚  FORWARD PASS                                               â”‚\r\n    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\n    â”‚                                                              â”‚\r\n    â”‚  1. Encoder texte                                            â”‚\r\n    â”‚     c â†’ one_hot(c) â†’ attention_values                       â”‚\r\n    â”‚                                                              â”‚\r\n    â”‚  2. Initialiser Ã©tat                                        â”‚\r\n    â”‚     state = cell.zero_state(batch_size)                     â”‚\r\n    â”‚                                                              â”‚\r\n    â”‚  3. Free Run RNN                                            â”‚\r\n    â”‚     Pour t = 0 Ã  T-1:                                       â”‚\r\n    â”‚       input_t = x[:, t, :]  # [dx, dy, eos]                â”‚\r\n    â”‚       h_t, state = cell(input_t, state, attention)          â”‚\r\n    â”‚                                                              â”‚\r\n    â”‚  4. GMM Layer                                               â”‚\r\n    â”‚     params = gmm_layer(outputs)                              â”‚\r\n    â”‚     â†’ pis, mus, sigmas, rhos, es                           â”‚\r\n    â”‚                                                              â”‚\r\n    â”‚  5. Calculer Loss                                           â”‚\r\n    â”‚     nll = negative_log_likelihood(y, params)                â”‚\r\n    â”‚     â†’ sequence_loss, element_loss                           â”‚\r\n    â”‚                                                              â”‚\r\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n           â”‚\r\n           â–¼\r\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n    â”‚  BACKWARD PASS                                               â”‚\r\n    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\n    â”‚                                                              â”‚\r\n    â”‚  1. Backpropagation                                          â”‚\r\n    â”‚     loss.backward()                                          â”‚\r\n    â”‚                                                              â”‚\r\n    â”‚  2. Mise Ã  jour poids                                        â”‚\r\n    â”‚     optimizer.step()                                         â”‚\r\n    â”‚                                                              â”‚\r\n    â”‚  3. Gradient clipping (optionnel)                            â”‚\r\n    â”‚                                                              â”‚\r\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n           â”‚\r\n           â–¼\r\n    Sauvegarde checkpoints\r\n    (pÃ©riodiquement)\r\n```\r\n\r\n---\r\n\r\n## Conversion Strokes â†’ Image (dans Dataset)\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚          CONVERSION STROKES â†’ IMAGE (IAMDataset)               â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nInput: Strokes (offsets)\r\n  [dxâ‚, dyâ‚, 0]  â†’  Point 1\r\n  [dxâ‚‚, dyâ‚‚, 0]  â†’  Point 2\r\n  [dxâ‚ƒ, dyâ‚ƒ, 1]  â†’  Point 3 (fin de trait)\r\n  [dxâ‚„, dyâ‚„, 0]  â†’  Point 4\r\n  ...\r\n\r\n         â”‚\r\n         â–¼\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  Ã‰TAPE 1: Conversion Offsets â†’ CoordonnÃ©es                   â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                                                              â”‚\r\nâ”‚  coords = cumsum(offsets[:, :2])                            â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  RÃ©sultat:                                                   â”‚\r\nâ”‚    [xâ‚, yâ‚, 0]                                               â”‚\r\nâ”‚    [xâ‚‚, yâ‚‚, 0]                                               â”‚\r\nâ”‚    [xâ‚ƒ, yâ‚ƒ, 1]  â† Fin de trait                             â”‚\r\nâ”‚    [xâ‚„, yâ‚„, 0]                                               â”‚\r\nâ”‚    ...                                                       â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n         â”‚\r\n         â–¼\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  Ã‰TAPE 2: Normalisation et Centrage                         â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                                                              â”‚\r\nâ”‚  1. Calculer min/max:                                       â”‚\r\nâ”‚     min_x, min_y = min(coords)                              â”‚\r\nâ”‚     max_x, max_y = max(coords)                              â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  2. Calculer scale:                                         â”‚\r\nâ”‚     scale = min(target_size/width, target_size/height)      â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  3. Centrer et redimensionner:                               â”‚\r\nâ”‚     coords = (coords - [min_x, min_y]) * scale + padding   â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  RÃ©sultat: CoordonnÃ©es dans [0, 128]                        â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n         â”‚\r\n         â–¼\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  Ã‰TAPE 3: Dessin avec PIL                                   â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                                                              â”‚\r\nâ”‚  img = Image.new('L', (128, 128), color=255)  # Fond blanc    â”‚\r\nâ”‚  draw = ImageDraw.Draw(img)                                 â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  Pour chaque trait (sÃ©parÃ© par eos=1):                       â”‚\r\nâ”‚    points = coords[start:end, :2]                           â”‚\r\nâ”‚    draw.line(points, fill=0, width=2)  # Noir              â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  RÃ©sultat: Image PIL 128Ã—128 (niveaux de gris)              â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n         â”‚\r\n         â–¼\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  Ã‰TAPE 4: Transformation PyTorch                            â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                                                              â”‚\r\nâ”‚  transform = Compose([                                      â”‚\r\nâ”‚      ToTensor(),        # [0,255] â†’ [0,1]                   â”‚\r\nâ”‚      Normalize(0.5, 0.5)  # [0,1] â†’ [-1,1]                 â”‚\r\nâ”‚  ])                                                          â”‚\r\nâ”‚                                                              â”‚\r\nâ”‚  RÃ©sultat: Tensor (1, 128, 128) dans [-1, 1]                â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n```\r\n\r\n---\r\n\r\n## Pipeline d'Ã‰valuation (Section dÃ©taillÃ©e)\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    PIPELINE D'Ã‰VALUATION                       â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\n1. PRÃ‰PARATION\r\n   â”‚\r\n   â”œâ”€ prepare_evaluation_data.py\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ Charger donnÃ©es IAM\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ Pour chaque Ã©chantillon:\r\n   â”‚  â”‚  â”‚\r\n   â”‚  â”‚  â”œâ”€ GÃ©nÃ©rer image RÃ‰ELLE\r\n   â”‚  â”‚  â”‚  â””â”€ drawing.draw(strokes) â†’ evaluation/real/\r\n   â”‚  â”‚  â”‚\r\n   â”‚  â”‚  â””â”€ GÃ©nÃ©rer image GÃ‰NÃ‰RÃ‰E\r\n   â”‚  â”‚     â””â”€ renderer.render(text) â†’ evaluation/gen/\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ Sauvegarder paires d'images\r\n   â”‚\r\n   â–¼\r\n\r\n2. CALCUL DES MÃ‰TRIQUES (4 mÃ©thodes disponibles)\r\n   â”‚\r\n   â”œâ”€ MÃ©thode 1: calculate_metrics.py (Interactif) â­\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ Guide pas Ã  pas interactif\r\n   â”‚\r\n   â”œâ”€ MÃ©thode 2: streamlit_metrics.py (Interface graphique) ğŸ¨\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ Interface Streamlit avec visualisation\r\n   â”‚\r\n   â”œâ”€ MÃ©thode 3: quick_metrics.py (Rapide) âš¡\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ Chemins en dur ou variables d'environnement\r\n   â”‚\r\n   â””â”€ MÃ©thode 4: evaluate_metrics.py (AvancÃ©) ğŸ”§\r\n      â”‚\r\n      â””â”€ Options ligne de commande complÃ¨tes\r\n\r\n3. MÃ‰TRIQUES CALCULÃ‰ES\r\n   â”‚\r\n   â”œâ”€ MÃ©triques visuelles:\r\n   â”‚  â”œâ”€ FID (FrÃ©chet Inception Distance)\r\n   â”‚  â”‚  â””â”€ Inception v3 â†’ Features â†’ Distance FrÃ©chet\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ KID (Kernel Inception Distance)\r\n   â”‚     â””â”€ Inception v3 â†’ Features â†’ Kernel polynomial\r\n   â”‚\r\n   â”œâ”€ MÃ©triques de texte:\r\n   â”‚  â”œâ”€ CER (Character Error Rate)\r\n   â”‚  â”‚  â””â”€ OCR â†’ Texte â†’ Distance Levenshtein\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ WER (Word Error Rate)\r\n   â”‚  â”‚  â””â”€ OCR â†’ Mots â†’ Distance Levenshtein\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ OCR Accuracy\r\n   â”‚     â””â”€ Pourcentage caractÃ¨res corrects\r\n   â”‚\r\n   â””â”€ MÃ©triques de similaritÃ©:\r\n      â”œâ”€ SSIM (Structural Similarity)\r\n      â”œâ”€ PSNR (Peak Signal-to-Noise Ratio)\r\n      â””â”€ LPIPS (Learned Perceptual Similarity)\r\n\r\n4. RAPPORT\r\n   â”‚\r\n   â””â”€ Sauvegarde JSON\r\n      â”œâ”€ metrics_results.json\r\n      â””â”€ metrics_results_full.json\r\n```\r\n\r\n---\r\n\r\n## Comparaison des Deux Approches\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚              GAN vs RENDU STYLISÃ‰                              â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚   GAN (cGAN)         â”‚    â”‚  RENDU STYLISÃ‰       â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                      â”‚    â”‚                      â”‚\r\nâ”‚ âœ“ Style variable     â”‚    â”‚ âœ“ ContrÃ´le prÃ©cis    â”‚\r\nâ”‚ âœ“ Apprentissage      â”‚    â”‚ âœ“ Rapide             â”‚\r\nâ”‚ âœ“ RÃ©aliste           â”‚    â”‚ âœ“ Pas d'entraÃ®nementâ”‚\r\nâ”‚                      â”‚    â”‚ âœ“ Personnalisable   â”‚\r\nâ”‚ âœ— NÃ©cessite          â”‚    â”‚                      â”‚\r\nâ”‚   entraÃ®nement       â”‚    â”‚ âœ— Style limitÃ©      â”‚\r\nâ”‚ âœ— Lent (inference)   â”‚    â”‚ âœ— Moins rÃ©aliste     â”‚\r\nâ”‚ âœ— Moins contrÃ´lable â”‚    â”‚    (selon police)    â”‚\r\nâ”‚                      â”‚    â”‚                      â”‚\r\nâ”‚ Utilisation:         â”‚    â”‚ Utilisation:         â”‚\r\nâ”‚ - GÃ©nÃ©ration         â”‚    â”‚ - Prototypage       â”‚\r\nâ”‚   crÃ©ative           â”‚    â”‚ - Applications       â”‚\r\nâ”‚ - Style unique       â”‚    â”‚   production         â”‚\r\nâ”‚                      â”‚    â”‚ - Personnalisation  â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n```\r\n\r\n---\r\n\r\n## Format des DonnÃ©es Ã  Chaque Ã‰tape\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    FORMAT DES DONNÃ‰ES                           â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\n1. DONNÃ‰ES BRUTES (IAM)\r\n   â”‚\r\n   â”œâ”€ XML Strokes:\r\n   â”‚  <Point x=\"100\" y=\"200\"/>\r\n   â”‚  â†’ CoordonnÃ©es absolues\r\n   â”‚\r\n   â””â”€ ASCII:\r\n      \"Hello World\"\r\n      â†’ Texte brut\r\n\r\n2. APRÃˆS PRÃ‰TRAITEMENT\r\n   â”‚\r\n   â”œâ”€ x.npy: (N, 1200, 3)\r\n   â”‚  [[dx, dy, eos], ...]\r\n   â”‚  â†’ Offsets normalisÃ©s\r\n   â”‚\r\n   â””â”€ c.npy: (N, 75)\r\n      [char_idx1, char_idx2, ...]\r\n      â†’ Indices de caractÃ¨res\r\n\r\n3. DANS LE DATASET\r\n   â”‚\r\n   â”œâ”€ Image: (1, 128, 128)\r\n   â”‚  Tensor dans [-1, 1]\r\n   â”‚  â†’ Image PIL convertie\r\n   â”‚\r\n   â””â”€ Text: (20,)\r\n      [idx1, idx2, ..., 0, 0, 0]\r\n      â†’ Indices padding Ã  20\r\n\r\n4. ENTRÃ‰E DU GAN\r\n   â”‚\r\n   â”œâ”€ Noise: (B, 100)\r\n   â”‚  â†’ Vecteur alÃ©atoire\r\n   â”‚\r\n   â””â”€ Text: (B, 20)\r\n      â†’ Indices de caractÃ¨res\r\n\r\n5. SORTIE DU GAN\r\n   â”‚\r\n   â””â”€ Image: (B, 1, 128, 128)\r\n      â†’ Tensor dans [-1, 1]\r\n```\r\n\r\n---\r\n\r\n## Workflow Utilisateur\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    WORKFLOW UTILISATEUR                         â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nUTILISATEUR\r\n    â”‚\r\n    â”œâ”€ Option 1: Interface Streamlit (Rendu stylisÃ©)\r\n    â”‚  â”‚\r\n    â”‚  â””â”€ streamlit_app.py\r\n    â”‚     â”‚\r\n    â”‚     â”œâ”€ Saisie texte\r\n    â”‚     â”œâ”€ Choix police\r\n    â”‚     â”œâ”€ ParamÃ¨tres style\r\n    â”‚     â””â”€ GÃ©nÃ©ration instantanÃ©e\r\n    â”‚\r\n    â”œâ”€ Option 2: Interface MÃ©triques Streamlit\r\n    â”‚  â”‚\r\n    â”‚  â””â”€ streamlit_metrics.py\r\n    â”‚     â”‚\r\n    â”‚     â”œâ”€ Chargement images\r\n    â”‚     â”œâ”€ Calcul mÃ©triques\r\n    â”‚     â””â”€ Visualisation rÃ©sultats\r\n    â”‚\r\n    â”œâ”€ Option 3: Scripts Python Interactifs\r\n    â”‚  â”‚\r\n    â”‚  â”œâ”€ calculate_metrics.py\r\n    â”‚  â”‚  â””â”€ Script interactif guidÃ©\r\n    â”‚  â”‚\r\n    â”‚  â”œâ”€ quick_metrics.py\r\n    â”‚  â”‚  â””â”€ Script rapide (chemins en dur)\r\n    â”‚  â”‚\r\n    â”‚  â””â”€ evaluate_metrics.py\r\n    â”‚     â””â”€ Script avancÃ© (ligne de commande)\r\n    â”‚\r\n    â””â”€ Option 4: Scripts de PrÃ©paration\r\n       â”‚\r\n       â”œâ”€ prepare_data.py\r\n       â”‚  â””â”€ PrÃ©paration dataset IAM\r\n       â”‚\r\n       â”œâ”€ check_data.py\r\n       â”‚  â””â”€ VÃ©rification donnÃ©es\r\n       â”‚\r\n       â”œâ”€ check_data_rendering.py\r\n       â”‚  â””â”€ VÃ©rification rendu strokes\r\n       â”‚\r\n       â”œâ”€ diag_collect_stats.py\r\n       â”‚  â””â”€ Statistiques dataset\r\n       â”‚\r\n       â””â”€ diag_prepare.py\r\n          â””â”€ Diagnostic prÃ©paration\r\n```\r\n\r\n---\r\n\r\n## Architecture ComplÃ¨te du Projet\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    COMPOSANTS DU PROJET                         â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\n1. PRÃ‰PARATION DES DONNÃ‰ES\r\n   â”‚\r\n   â”œâ”€ prepare_data.py\r\n   â”‚  â””â”€ Extraction et normalisation dataset IAM\r\n   â”‚\r\n   â”œâ”€ check_data.py\r\n   â”‚  â””â”€ VÃ©rification fichiers .npy\r\n   â”‚\r\n   â”œâ”€ check_data_rendering.py\r\n   â”‚  â””â”€ Visualisation strokes â†’ images\r\n   â”‚\r\n   â”œâ”€ diag_collect_stats.py\r\n   â”‚  â””â”€ Collecte statistiques dataset\r\n   â”‚\r\n   â””â”€ diag_prepare.py\r\n      â””â”€ Diagnostic processus prÃ©paration\r\n\r\n2. MODÃˆLES DE GÃ‰NÃ‰RATION\r\n   â”‚\r\n   â”œâ”€ GAN (Conditionnel)\r\n   â”‚  â”œâ”€ model.py (Generator + Discriminator)\r\n   â”‚  â”œâ”€ dataset.py (IAMDataset PyTorch)\r\n   â”‚  â”œâ”€ train.py (EntraÃ®nement)\r\n   â”‚  â””â”€ app.py (Interface Streamlit)\r\n   â”‚\r\n   â”œâ”€ RNN/LSTM\r\n   â”‚  â”œâ”€ rnn.py (ModÃ¨le RNN principal)\r\n   â”‚  â”œâ”€ rnn_cell.py (Cellule LSTM avec attention)\r\n   â”‚  â””â”€ rnn_ops.py (OpÃ©rations RNN)\r\n   â”‚\r\n   â””â”€ TensorFlow (Alternative)\r\n      â”œâ”€ tf_base_model.py\r\n      â””â”€ tf_utils.py\r\n\r\n3. RENDU ET VISUALISATION\r\n   â”‚\r\n   â”œâ”€ drawing.py\r\n   â”‚  â””â”€ Utilitaires conversion strokes â†’ images\r\n   â”‚\r\n   â””â”€ handwriting_renderer.py\r\n      â””â”€ Rendu stylisÃ© avec polices\r\n\r\n4. Ã‰VALUATION ET MÃ‰TRIQUES\r\n   â”‚\r\n   â”œâ”€ metrics.py\r\n   â”‚  â””â”€ ImplÃ©mentation toutes les mÃ©triques\r\n   â”‚\r\n   â”œâ”€ calculate_metrics.py\r\n   â”‚  â””â”€ Script interactif guidÃ©\r\n   â”‚\r\n   â”œâ”€ quick_metrics.py\r\n   â”‚  â””â”€ Script rapide\r\n   â”‚\r\n   â”œâ”€ evaluate_metrics.py\r\n   â”‚  â””â”€ Script avancÃ© CLI\r\n   â”‚\r\n   â”œâ”€ streamlit_metrics.py\r\n   â”‚  â””â”€ Interface Streamlit mÃ©triques\r\n   â”‚\r\n   â””â”€ prepare_evaluation_data.py\r\n      â””â”€ GÃ©nÃ©ration paires (rÃ©el, gÃ©nÃ©rÃ©)\r\n\r\n5. INTERFACES UTILISATEUR\r\n   â”‚\r\n   â”œâ”€ streamlit_app.py\r\n   â”‚  â””â”€ Interface principale (rendu stylisÃ©)\r\n   â”‚\r\n   â””â”€ streamlit_metrics.py\r\n      â””â”€ Interface mÃ©triques\r\n\r\n6. UTILITAIRES\r\n   â”‚\r\n   â”œâ”€ data_frame.py\r\n   â”‚  â””â”€ Gestion donnÃ©es (analogue pandas)\r\n   â”‚\r\n   â””â”€ METRICS_GUIDE.md\r\n      â””â”€ Documentation mÃ©triques\r\n```\r\n\r\n---\r\n\r\n## Pipeline d'Ã‰valuation Complet\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚              PIPELINE D'Ã‰VALUATION MULTI-MÃ‰THODES               â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\n1. PRÃ‰PARATION DES DONNÃ‰ES D'Ã‰VALUATION\r\n   â”‚\r\n   â””â”€ prepare_evaluation_data.py\r\n      â”‚\r\n      â”œâ”€ Charger donnÃ©es IAM\r\n      â”œâ”€ GÃ©nÃ©rer images RÃ‰ELLES (strokes)\r\n      â”œâ”€ GÃ©nÃ©rer images GÃ‰NÃ‰RÃ‰ES (rendu stylisÃ©)\r\n      â””â”€ Sauvegarder dans evaluation/real/ et evaluation/gen/\r\n\r\n2. CALCUL DES MÃ‰TRIQUES (4 mÃ©thodes disponibles)\r\n   â”‚\r\n   â”œâ”€ MÃ©thode 1: Script Interactif â­ RECOMMANDÃ‰\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ calculate_metrics.py\r\n   â”‚     â”‚\r\n   â”‚     â”œâ”€ Guide interactif\r\n   â”‚     â”œâ”€ Chargement images\r\n   â”‚     â”œâ”€ Calcul automatique\r\n   â”‚     â””â”€ Affichage rÃ©sultats\r\n   â”‚\r\n   â”œâ”€ MÃ©thode 2: Interface Streamlit ğŸ¨\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ streamlit_metrics.py\r\n   â”‚     â”‚\r\n   â”‚     â”œâ”€ Interface graphique\r\n   â”‚     â”œâ”€ AperÃ§u images\r\n   â”‚     â”œâ”€ Calcul en un clic\r\n   â”‚     â””â”€ Export JSON\r\n   â”‚\r\n   â”œâ”€ MÃ©thode 3: Script Rapide âš¡\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ quick_metrics.py\r\n   â”‚     â”‚\r\n   â”‚     â”œâ”€ Chemins en dur ou variables d'environnement\r\n   â”‚     â”œâ”€ Calcul rapide\r\n   â”‚     â””â”€ Bon pour automatisation\r\n   â”‚\r\n   â””â”€ MÃ©thode 4: Script AvancÃ© ğŸ”§\r\n      â”‚\r\n      â””â”€ evaluate_metrics.py\r\n         â”‚\r\n         â”œâ”€ Options ligne de commande\r\n         â”œâ”€ Toutes les options disponibles\r\n         â””â”€ Export JSON personnalisÃ©\r\n\r\n3. MÃ‰TRIQUES CALCULÃ‰ES\r\n   â”‚\r\n   â”œâ”€ QualitÃ© Visuelle:\r\n   â”‚  â”œâ”€ FID (FrÃ©chet Inception Distance)\r\n   â”‚  â””â”€ KID (Kernel Inception Distance)\r\n   â”‚\r\n   â”œâ”€ Reconnaissance Texte:\r\n   â”‚  â”œâ”€ CER (Character Error Rate)\r\n   â”‚  â”œâ”€ WER (Word Error Rate)\r\n   â”‚  â””â”€ OCR Accuracy\r\n   â”‚\r\n   â””â”€ SimilaritÃ©:\r\n      â”œâ”€ SSIM (Structural Similarity)\r\n      â”œâ”€ PSNR (Peak Signal-to-Noise Ratio)\r\n      â””â”€ LPIPS (Learned Perceptual Similarity)\r\n\r\n4. RAPPORTS\r\n   â”‚\r\n   â””â”€ Sauvegarde JSON\r\n      â”œâ”€ metrics_results.json\r\n      â””â”€ metrics_results_full.json\r\n```\r\n\r\n---\r\n\r\n## Pipeline RNN/LSTM Complet â­ PRINCIPAL\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    PIPELINE RNN/LSTM COMPLET                  â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nÃ‰TAPE 1: PRÃ‰PARATION DES DONNÃ‰ES\r\n   â”‚\r\n   â”œâ”€ prepare_data.py\r\n   â”‚  â””â”€ Dataset IAM â†’ data/processed/*.npy\r\n   â”‚\r\n   â””â”€ DataReader (rnn.py)\r\n      â””â”€ Chargement et batching\r\n\r\nÃ‰TAPE 2: ENCODAGE\r\n   â”‚\r\n   â”œâ”€ Texte â†’ One-Hot\r\n   â”‚  â””â”€ F.one_hot(c, alphabet_size)\r\n   â”‚\r\n   â””â”€ Strokes â†’ NormalisÃ©s\r\n      â””â”€ [dx, dy, eos] dÃ©jÃ  normalisÃ©s\r\n\r\nÃ‰TAPE 3: ENTRAÃNEMENT\r\n   â”‚\r\n   â”œâ”€ Initialisation\r\n   â”‚  â””â”€ RNN(lstm_size=400, output_mixture=20, attn_mixture=10)\r\n   â”‚\r\n   â”œâ”€ Boucle d'entraÃ®nement\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ Forward Pass\r\n   â”‚  â”‚  â”œâ”€ Free Run RNN\r\n   â”‚  â”‚  â”œâ”€ GMM Layer\r\n   â”‚  â”‚  â””â”€ Loss (NLL)\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ Backward Pass\r\n   â”‚     â”œâ”€ Backpropagation\r\n   â”‚     â””â”€ Optimizer step\r\n   â”‚\r\n   â””â”€ Sauvegarde modÃ¨les\r\n\r\nÃ‰TAPE 4: GÃ‰NÃ‰RATION (INFERENCE)\r\n   â”‚\r\n   â”œâ”€ Input: Texte\r\n   â”‚\r\n   â”œâ”€ Encoder texte\r\n   â”‚  â””â”€ One-hot encoding\r\n   â”‚\r\n   â”œâ”€ Initialiser Ã©tat\r\n   â”‚  â””â”€ state = cell.zero_state()\r\n   â”‚\r\n   â”œâ”€ GÃ©nÃ©ration sÃ©quentielle\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ Pour chaque timestep:\r\n   â”‚  â”‚  â”œâ”€ Calculer attention\r\n   â”‚  â”‚  â”œâ”€ LSTM step\r\n   â”‚  â”‚  â”œâ”€ GMM layer\r\n   â”‚  â”‚  â”œâ”€ Ã‰chantillonner stroke\r\n   â”‚  â”‚  â”‚  â””â”€ [dx, dy, eos]\r\n   â”‚  â”‚  â””â”€ Mettre Ã  jour Ã©tat\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ Jusqu'Ã  eos=1 ou max_length\r\n   â”‚\r\n   â””â”€ Output: SÃ©quences de strokes\r\n\r\nÃ‰TAPE 5: RENDU IMAGE\r\n   â”‚\r\n   â””â”€ drawing.draw(strokes)\r\n      â””â”€ Conversion strokes â†’ Image 128Ã—128\r\n```\r\n\r\n---\r\n\r\n## Architecture DÃ©taillÃ©e RNN/LSTM\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚              COMPOSANTS DU SYSTÃˆME RNN/LSTM                    â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\n1. LSTMAttentionCell (rnn_cell.py)\r\n   â”‚\r\n   â”œâ”€ Input: [dx, dy, eos] (3-D) + attention context\r\n   â”‚\r\n   â”œâ”€ Attention Projection\r\n   â”‚  â””â”€ Linear(2 â†’ 3) avec tanh\r\n   â”‚\r\n   â”œâ”€ LSTM Cell\r\n   â”‚  â””â”€ LSTMCell(6 â†’ lstm_size)\r\n   â”‚     Input: [dx, dy, eos, attn_proj[3]]\r\n   â”‚\r\n   â”œâ”€ Attention Computation\r\n   â”‚  â””â”€ Mixture of Gaussians sur texte\r\n   â”‚\r\n   â””â”€ Output: hidden state (lstm_size)\r\n\r\n2. RNN Model (rnn.py)\r\n   â”‚\r\n   â”œâ”€ Free Run\r\n   â”‚  â””â”€ Boucle sÃ©quentielle sur strokes\r\n   â”‚\r\n   â”œâ”€ GMM Layer\r\n   â”‚  â””â”€ Linear(lstm_size â†’ K*6 + 1)\r\n   â”‚     K = output_mixture_components\r\n   â”‚\r\n   â”œâ”€ Parameter Parsing\r\n   â”‚  â”œâ”€ pis: Softmax (mixing coefficients)\r\n   â”‚  â”œâ”€ mus: Means [mu_x, mu_y]\r\n   â”‚  â”œâ”€ sigmas: Exp + clamp (std devs)\r\n   â”‚  â”œâ”€ rhos: Tanh (correlations)\r\n   â”‚  â””â”€ es: Sigmoid (end-of-stroke prob)\r\n   â”‚\r\n   â””â”€ Loss Function\r\n      â””â”€ Negative Log Likelihood\r\n         â”œâ”€ GMM likelihood (Gaussian mixture)\r\n         â””â”€ Bernoulli likelihood (eos)\r\n\r\n3. OpÃ©rations RNN (rnn_ops.py)\r\n   â”‚\r\n   â”œâ”€ raw_rnn: Boucle RNN gÃ©nÃ©rique\r\n   â”œâ”€ rnn_teacher_force: EntraÃ®nement avec ground truth\r\n   â””â”€ rnn_free_run: GÃ©nÃ©ration autonome\r\n\r\n4. Utilitaires TensorFlow (tf_utils.py)\r\n   â”‚\r\n   â””â”€ CompatibilitÃ© TensorFlow (si nÃ©cessaire)\r\n```\r\n\r\n---\r\n\r\n## Structure ComplÃ¨te des Fichiers\r\n\r\n```\r\nGEN - Copie/\r\nâ”‚\r\nâ”œâ”€â”€ data/\r\nâ”‚   â”œâ”€â”€ raw/                    # Dataset IAM brut\r\nâ”‚   â”‚   â”œâ”€â”€ ascii/\r\nâ”‚   â”‚   â”œâ”€â”€ lineStrokes/\r\nâ”‚   â”‚   â””â”€â”€ original-xml/\r\nâ”‚   â”‚\r\nâ”‚   â”œâ”€â”€ processed/              # DonnÃ©es prÃ©processÃ©es\r\nâ”‚   â”‚   â”œâ”€â”€ x.npy               # Strokes\r\nâ”‚   â”‚   â”œâ”€â”€ x_len.npy           # Longueurs strokes\r\nâ”‚   â”‚   â”œâ”€â”€ c.npy               # Transcriptions\r\nâ”‚   â”‚   â”œâ”€â”€ c_len.npy           # Longueurs textes\r\nâ”‚   â”‚   â””â”€â”€ w_id.npy            # IDs Ã©crivains\r\nâ”‚   â”‚\r\nâ”‚   â”œâ”€â”€ dataset.py              # Dataset personnalisÃ©\r\nâ”‚   â””â”€â”€ all_datasets.pickle     # Cache datasets\r\nâ”‚\r\nâ”œâ”€â”€ words/                      # Images PNG (source alternative)\r\nâ”‚   â””â”€â”€ [a01, a02, ..., r06]/  # Dossiers par Ã©crivain\r\nâ”‚\r\nâ”œâ”€â”€ evaluation/\r\nâ”‚   â”œâ”€â”€ real/                  # Images rÃ©elles\r\nâ”‚   â””â”€â”€ gen/                   # Images gÃ©nÃ©rÃ©es\r\nâ”‚\r\nâ”œâ”€â”€ debug_render/              # Images de debug\r\nâ”‚\r\nâ”œâ”€â”€ logs/                      # Fichiers de logs\r\nâ”‚\r\nâ”œâ”€â”€ PRÃ‰PARATION DES DONNÃ‰ES\r\nâ”‚   â”œâ”€â”€ prepare_data.py        # PrÃ©paration principale\r\nâ”‚   â”œâ”€â”€ check_data.py          # VÃ©rification donnÃ©es\r\nâ”‚   â”œâ”€â”€ check_data_rendering.py # VÃ©rification rendu\r\nâ”‚   â”œâ”€â”€ diag_collect_stats.py  # Statistiques\r\nâ”‚   â””â”€â”€ diag_prepare.py        # Diagnostic\r\nâ”‚\r\nâ”œâ”€â”€ MODÃˆLES\r\nâ”‚   â”œâ”€â”€ RNN/LSTM â­ PRINCIPAL\r\nâ”‚   â”‚   â”œâ”€â”€ rnn.py               # ModÃ¨le RNN principal\r\nâ”‚   â”‚   â”œâ”€â”€ rnn_cell.py          # Cellule LSTM avec attention\r\nâ”‚   â”‚   â””â”€â”€ rnn_ops.py           # OpÃ©rations RNN optimisÃ©es\r\nâ”‚   â”‚\r\nâ”‚   â”œâ”€â”€ TensorFlow (Alternative)\r\nâ”‚   â”‚   â”œâ”€â”€ tf_base_model.py    # ModÃ¨le TensorFlow\r\nâ”‚   â”‚   â””â”€â”€ tf_utils.py          # Utilitaires TensorFlow\r\nâ”‚   â”‚\r\nâ”‚   â””â”€â”€ GAN (FUTUR - Non implÃ©mentÃ©)\r\nâ”‚       â””â”€â”€ [Ã€ implÃ©menter]\r\nâ”‚\r\nâ”œâ”€â”€ RENDU\r\nâ”‚   â”œâ”€â”€ drawing.py              # Utilitaires strokes\r\nâ”‚   â””â”€â”€ handwriting_renderer.py # Rendu stylisÃ©\r\nâ”‚\r\nâ”œâ”€â”€ Ã‰VALUATION\r\nâ”‚   â”œâ”€â”€ metrics.py              # ImplÃ©mentation mÃ©triques\r\nâ”‚   â”œâ”€â”€ calculate_metrics.py    # Script interactif\r\nâ”‚   â”œâ”€â”€ quick_metrics.py         # Script rapide\r\nâ”‚   â”œâ”€â”€ evaluate_metrics.py     # Script avancÃ©\r\nâ”‚   â”œâ”€â”€ prepare_evaluation_data.py # PrÃ©paration Ã©valuation\r\nâ”‚   â””â”€â”€ streamlit_metrics.py        # Interface Streamlit\r\nâ”‚\r\nâ”œâ”€â”€ INTERFACES\r\nâ”‚   â”œâ”€â”€ streamlit_app.py        # Interface principale\r\nâ”‚   â””â”€â”€ streamlit_metrics.py    # Interface mÃ©triques\r\nâ”‚\r\nâ”œâ”€â”€ UTILITAIRES\r\nâ”‚   â”œâ”€â”€ data_frame.py            # Gestion donnÃ©es\r\nâ”‚   â””â”€â”€ requirements.txt         # DÃ©pendances\r\nâ”‚\r\nâ””â”€â”€ DOCUMENTATION\r\n    â”œâ”€â”€ ARCHITECTURE_GUIDE.md   # Guide architecture\r\n    â”œâ”€â”€ PIPELINE_DIAGRAM.md      # Ce fichier\r\n    â””â”€â”€ METRICS_GUIDE.md         # Guide mÃ©triques\r\n```\r\n\r\n---\r\n\r\n## Comparaison des Approches\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚          RNN/LSTM vs RENDU STYLISÃ‰ vs GAN (FUTUR)              â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚   RNN/LSTM â­        â”‚  â”‚  RENDU STYLISÃ‰       â”‚  â”‚   GAN (cGAN)         â”‚\r\nâ”‚   PRINCIPAL          â”‚  â”‚                      â”‚  â”‚   FUTUR              â”‚\r\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\r\nâ”‚                      â”‚  â”‚                      â”‚  â”‚                      â”‚\r\nâ”‚ âœ“ GÃ©nÃ©ration         â”‚  â”‚ âœ“ ContrÃ´le prÃ©cis    â”‚  â”‚ âœ“ Style variable     â”‚\r\nâ”‚   sÃ©quentielle       â”‚  â”‚ âœ“ Rapide             â”‚  â”‚ âœ“ Apprentissage      â”‚\r\nâ”‚ âœ“ ModÃ¨le temporel    â”‚  â”‚ âœ“ Pas d'entraÃ®nementâ”‚  â”‚ âœ“ RÃ©aliste           â”‚\r\nâ”‚ âœ“ Attention          â”‚  â”‚ âœ“ Personnalisable   â”‚  â”‚ âœ“ Images directes    â”‚\r\nâ”‚   mechanism          â”‚  â”‚ âœ“ Facile Ã  utiliser  â”‚  â”‚                      â”‚\r\nâ”‚ âœ“ Strokes naturels   â”‚  â”‚                      â”‚  â”‚ âœ— Non implÃ©mentÃ©    â”‚\r\nâ”‚ âœ“ ModÃ¨le             â”‚  â”‚ âœ— Style limitÃ©       â”‚  â”‚ âœ— NÃ©cessite          â”‚\r\nâ”‚   probabiliste       â”‚  â”‚ âœ— Moins rÃ©aliste     â”‚  â”‚   entraÃ®nement       â”‚\r\nâ”‚ âœ“ ImplÃ©mentÃ©         â”‚  â”‚    (selon police)    â”‚  â”‚ âœ— Lent (inference)   â”‚\r\nâ”‚                      â”‚  â”‚                      â”‚  â”‚ âœ— Moins contrÃ´lable â”‚\r\nâ”‚ âœ— NÃ©cessite          â”‚  â”‚                      â”‚  â”‚                      â”‚\r\nâ”‚   entraÃ®nement      â”‚  â”‚                      â”‚  â”‚                      â”‚\r\nâ”‚ âœ— Plus complexe      â”‚  â”‚ Utilisation:         â”‚  â”‚ Utilisation:         â”‚\r\nâ”‚ âœ— Conversion requise â”‚  â”‚ - Prototypage       â”‚  â”‚ - GÃ©nÃ©ration         â”‚\r\nâ”‚   (strokesâ†’image)    â”‚  â”‚ - Applications       â”‚  â”‚   crÃ©ative           â”‚\r\nâ”‚                      â”‚  â”‚   production         â”‚  â”‚ - Style unique       â”‚\r\nâ”‚                      â”‚  â”‚ - Personnalisation  â”‚  â”‚ - Images haute       â”‚\r\nâ”‚ Utilisation:         â”‚  â”‚ - DÃ©monstrations    â”‚  â”‚   qualitÃ©            â”‚\r\nâ”‚ - GÃ©nÃ©ration         â”‚  â”‚                      â”‚  â”‚                      â”‚\r\nâ”‚   sÃ©quentielle      â”‚  â”‚                      â”‚  â”‚                      â”‚\r\nâ”‚ - ModÃ©lisation       â”‚  â”‚                      â”‚  â”‚                      â”‚\r\nâ”‚   temporelle         â”‚  â”‚                      â”‚  â”‚                      â”‚\r\nâ”‚ - Recherche          â”‚  â”‚                      â”‚  â”‚                      â”‚\r\nâ”‚ - Production         â”‚  â”‚                      â”‚  â”‚                      â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n```\r\n\r\n---\r\n\r\n## Pipeline de Diagnostic et VÃ©rification\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚              OUTILS DE DIAGNOSTIC ET VÃ‰RIFICATION              â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\n1. VÃ‰RIFICATION DES DONNÃ‰ES\r\n   â”‚\r\n   â”œâ”€ check_data.py\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ VÃ©rifie existence data/processed/\r\n   â”‚  â”œâ”€ Liste fichiers .npy prÃ©sents\r\n   â”‚  â”œâ”€ VÃ©rifie shapes et dtypes\r\n   â”‚  â””â”€ Affiche statut de chaque fichier\r\n   â”‚\r\n   â””â”€ check_data_rendering.py\r\n      â”‚\r\n      â”œâ”€ Charge x.npy et x_len.npy\r\n      â”œâ”€ Convertit strokes â†’ images\r\n      â”œâ”€ Sauvegarde Ã©chantillons dans debug_render/\r\n      â””â”€ Permet vÃ©rification visuelle\r\n\r\n2. STATISTIQUES ET DIAGNOSTIC\r\n   â”‚\r\n   â”œâ”€ diag_collect_stats.py\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ Parcourt dataset IAM\r\n   â”‚  â”œâ”€ Collecte statistiques:\r\n   â”‚  â”‚  â”œâ”€ Nombre fichiers ASCII\r\n   â”‚  â”‚  â”œâ”€ Correspondances strokes\r\n   â”‚  â”‚  â”œâ”€ Fichiers XML originaux\r\n   â”‚  â”‚  â””â”€ Erreurs de correspondance\r\n   â”‚  â””â”€ Affiche exemples d'erreurs\r\n   â”‚\r\n   â””â”€ diag_prepare.py\r\n      â”‚\r\n      â””â”€ Diagnostic processus prepare_data.py\r\n\r\n3. UTILISATION TYPIQUE\r\n   â”‚\r\n   â”œâ”€ AprÃ¨s prepare_data.py:\r\n   â”‚  â””â”€ python check_data.py\r\n   â”‚     â†’ VÃ©rifier que les fichiers sont corrects\r\n   â”‚\r\n   â”œâ”€ Pour visualiser les donnÃ©es:\r\n   â”‚  â””â”€ python check_data_rendering.py\r\n   â”‚     â†’ GÃ©nÃ¨re images dans debug_render/\r\n   â”‚\r\n   â””â”€ Pour diagnostiquer problÃ¨mes:\r\n      â””â”€ python diag_collect_stats.py\r\n         â†’ Identifie problÃ¨mes de correspondance\r\n```\r\n\r\n---\r\n\r\n## Workflow Complet RecommandÃ©\r\n\r\n```\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚                    WORKFLOW COMPLET                             â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n\r\nÃ‰TAPE 1: PRÃ‰PARATION INITIALE\r\n   â”‚\r\n   â”œâ”€ 1.1 VÃ©rifier dataset IAM\r\n   â”‚  â””â”€ python prepare_data.py\r\n   â”‚     â†’ VÃ©rifie existence et structure\r\n   â”‚\r\n   â”œâ”€ 1.2 PrÃ©parer les donnÃ©es\r\n   â”‚  â””â”€ python prepare_data.py\r\n   â”‚     â†’ GÃ©nÃ¨re data/processed/*.npy\r\n   â”‚\r\n   â”œâ”€ 1.3 VÃ©rifier les donnÃ©es\r\n   â”‚  â””â”€ python check_data.py\r\n   â”‚     â†’ Confirme que tout est OK\r\n   â”‚\r\n   â””â”€ 1.4 Visualiser Ã©chantillons\r\n      â””â”€ python check_data_rendering.py\r\n         â†’ VÃ©rifie visuellement le rendu\r\n\r\nÃ‰TAPE 2: ENTRAÃNEMENT\r\n   â”‚\r\n   â”œâ”€ 2.1 EntraÃ®ner RNN/LSTM â­\r\n   â”‚  â””â”€ python rnn.py\r\n   â”‚     â†’ EntraÃ®ne le modÃ¨le RNN avec attention\r\n   â”‚\r\n   â””â”€ 2.2 Alternative: TensorFlow\r\n      â””â”€ Utiliser tf_base_model.py si nÃ©cessaire\r\n\r\nÃ‰TAPE 3: GÃ‰NÃ‰RATION\r\n   â”‚\r\n   â”œâ”€ 3.1 Interface Streamlit (Rendu stylisÃ©)\r\n   â”‚  â””â”€ streamlit run streamlit_app.py\r\n   â”‚\r\n   â”œâ”€ 3.2 Interface GAN (si entraÃ®nÃ©)\r\n   â”‚  â””â”€ streamlit run GAN/app.py\r\n   â”‚\r\n   â””â”€ 3.3 Scripts Python\r\n      â””â”€ GÃ©nÃ©ration programmatique\r\n\r\nÃ‰TAPE 4: Ã‰VALUATION\r\n   â”‚\r\n   â”œâ”€ 4.1 PrÃ©parer donnÃ©es Ã©valuation\r\n   â”‚  â””â”€ python prepare_evaluation_data.py\r\n   â”‚\r\n   â”œâ”€ 4.2 Calculer mÃ©triques\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ Option A: Interactif\r\n   â”‚  â”‚  â””â”€ python calculate_metrics.py\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ Option B: Interface graphique\r\n   â”‚  â”‚  â””â”€ streamlit run streamlit_metrics.py\r\n   â”‚  â”‚\r\n   â”‚  â”œâ”€ Option C: Rapide\r\n   â”‚  â”‚  â””â”€ python quick_metrics.py\r\n   â”‚  â”‚\r\n   â”‚  â””â”€ Option D: AvancÃ©\r\n   â”‚     â””â”€ python evaluate_metrics.py --real_dir ... --gen_dir ...\r\n   â”‚\r\n   â””â”€ 4.3 Analyser rÃ©sultats\r\n      â””â”€ Consulter metrics_results.json\r\n```\r\n\r\n---\r\n\r\nCe diagramme complÃ¨te le guide d'architecture en fournissant des reprÃ©sentations visuelles du pipeline complet du projet, incluant tous les composants disponibles, les outils de diagnostic, et les workflows recommandÃ©s.\r\n\r\n",
  "toolName": "auto-backup",
  "toolInput": {
    "file_path": "pipline.md",
    "trigger": "local-change"
  },
  "metadata": {
    "lineCount": 1126,
    "characterCount": 38899,
    "fileSize": 53486,
    "language": "markdown",
    "mimeType": "text/plain",
    "contentHash": "90f5735a1ff79cca2c5a2707fe215a7bda7b93e9974af4adeda57bfac302fec2"
  },
  "backupType": "auto-local-change",
  "checkpointLabel": "File modified: pipline.md"
}