# ğŸ”„ Diagramme Visuel du Pipeline

## Vue d'Ensemble SimplifiÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GÃ‰NÃ‰RATION D'Ã‰CRITURE MANUSCRITE               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INPUT: Texte ("Hello World")
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                   â”‚
         â–¼                                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   GAN   â”‚                        â”‚ RENDU  â”‚
    â”‚ (cGAN)  â”‚                        â”‚STYLISÃ‰  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                   â”‚
         â”‚                                   â”‚
         â–¼                                   â–¼
    Image 128Ã—128                      Image stylisÃ©e
    (apprise)                          (polices + effets)
         â”‚                                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                    OUTPUT: Image d'Ã©criture manuscrite
```

---

## Pipeline Complet de PrÃ©paration des DonnÃ©es

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRÃ‰PARATION DES DONNÃ‰ES                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Dataset IAM (Brut)
â”‚
â”œâ”€ data/raw/ascii/*.txt
â”‚  â””â”€ Transcriptions: "Hello World"
â”‚
â”œâ”€ data/raw/lineStrokes/*.xml
â”‚  â””â”€ Strokes XML: <Stroke><Point x="100" y="200"/></Stroke>
â”‚
â””â”€ data/raw/original-xml/*.xml
   â””â”€ MÃ©tadonnÃ©es: writerID, etc.

         â”‚
         â”‚ prepare_data.py
         â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TRAITEMENT DES STROKES                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  XML â†’ CoordonnÃ©es (x, y, eos)                              â”‚
â”‚    â”‚                                                         â”‚
â”‚    â”œâ”€ align()      â†’ Correction inclinaison                 â”‚
â”‚    â”œâ”€ denoise()     â†’ Lissage Savitzky-Golay                â”‚
â”‚    â”œâ”€ coords_to_offsets() â†’ Conversion en dÃ©placements      â”‚
â”‚    â””â”€ normalize()  â†’ Normalisation                         â”‚
â”‚                                                              â”‚
â”‚  RÃ©sultat: [dx, dy, eos] normalisÃ©s                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TRAITEMENT DES TRANSCRIPTIONS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ASCII â†’ Texte brut                                          â”‚
â”‚    â”‚                                                         â”‚
â”‚    â””â”€ encode_ascii() â†’ Indices dans alphabet                â”‚
â”‚                                                              â”‚
â”‚  RÃ©sultat: [char_idx1, char_idx2, ...]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SAUVEGARDE (data/processed/)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  x.npy      â†’ Strokes: (N, 1200, 3)                         â”‚
â”‚  x_len.npy  â†’ Longueurs: (N,)                               â”‚
â”‚  c.npy      â†’ Transcriptions: (N, 75)                        â”‚
â”‚  c_len.npy  â†’ Longueurs textes: (N,)                        â”‚
â”‚  w_id.npy   â†’ IDs Ã©crivains: (N,)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture du GAN

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GÃ‰NÃ‰RATEUR (Generator)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Noise  â”‚         â”‚   Text   â”‚
  â”‚ (100-D) â”‚         â”‚ (20 chars)â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
       â”‚                   â–¼
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚            â”‚  Embedding  â”‚
       â”‚            â”‚  (20Ã—128)    â”‚
       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ConcatÃ©nationâ”‚
        â”‚  (100 + 2560)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      FC      â”‚
        â”‚  (2660â†’8192) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Reshape    â”‚
        â”‚  (512,4,4)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Upsampling Progressifâ”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  4Ã—4  â†’  8Ã—8         â”‚
    â”‚  8Ã—8  â†’ 16Ã—16        â”‚
    â”‚ 16Ã—16 â†’ 32Ã—32        â”‚
    â”‚ 32Ã—32 â†’ 64Ã—64        â”‚
    â”‚ 64Ã—64 â†’ 128Ã—128      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Output     â”‚
        â”‚ (1,128,128)  â”‚
        â”‚   [-1, 1]    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 DISCRIMINATEUR (Discriminator)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Image  â”‚         â”‚   Text   â”‚
  â”‚(128Ã—128)â”‚         â”‚(20 chars)â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
       â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Conv Blocks â”‚    â”‚  Embedding   â”‚
â”‚  (Downsample)â”‚    â”‚  (20Ã—128)    â”‚
â”‚              â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  128â†’64      â”‚           â”‚
â”‚  64â†’32       â”‚           â–¼
â”‚  32â†’16       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  16â†’8        â”‚    â”‚      FC      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  (2560â†’32768)â”‚
       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚            â”‚   Reshape    â”‚
       â”‚            â”‚  (512,8,8)    â”‚
       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ConcatÃ©nationâ”‚
        â”‚  (1024,8,8)  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Conv Final  â”‚
        â”‚  (1024â†’1)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Sigmoid    â”‚
        â”‚   Score      â”‚
        â”‚   [0, 1]     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Processus d'EntraÃ®nement

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BOUCLE D'ENTRAÃNEMENT                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pour chaque EPOCH:
    â”‚
    â””â”€ Pour chaque BATCH:
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                                     â”‚
           â–¼                                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  TRAIN G     â”‚                    â”‚  TRAIN D     â”‚
    â”‚ (Generator)  â”‚                    â”‚(Discriminator)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                     â”‚
           â”‚ 1. GÃ©nÃ©rer images                   â”‚ 1. Ã‰valuer images rÃ©elles
           â”‚    z = randn(100)                   â”‚    real_score = D(real_img, text)
           â”‚    gen_img = G(z, text)              â”‚
           â”‚                                     â”‚ 2. Ã‰valuer images gÃ©nÃ©rÃ©es
           â”‚ 2. Calculer loss                    â”‚    fake_score = D(gen_img, text)
           â”‚    g_loss = MSE(D(gen_img), 1)      â”‚
           â”‚                                     â”‚ 3. Calculer loss
           â”‚ 3. Backprop                          â”‚    d_loss = 0.5*(MSE(real,1) + MSE(fake,0))
           â”‚    g_loss.backward()                 â”‚
           â”‚    optimizer_G.step()                â”‚ 4. Backprop
           â”‚                                     â”‚    d_loss.backward()
           â”‚                                     â”‚    optimizer_D.step()
           â”‚                                     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              Sauvegarde checkpoints
              (tous les 5 epochs)
```

---

## Conversion Strokes â†’ Image (dans Dataset)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          CONVERSION STROKES â†’ IMAGE (IAMDataset)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input: Strokes (offsets)
  [dxâ‚, dyâ‚, 0]  â†’  Point 1
  [dxâ‚‚, dyâ‚‚, 0]  â†’  Point 2
  [dxâ‚ƒ, dyâ‚ƒ, 1]  â†’  Point 3 (fin de trait)
  [dxâ‚„, dyâ‚„, 0]  â†’  Point 4
  ...

         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ã‰TAPE 1: Conversion Offsets â†’ CoordonnÃ©es                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  coords = cumsum(offsets[:, :2])                            â”‚
â”‚                                                              â”‚
â”‚  RÃ©sultat:                                                   â”‚
â”‚    [xâ‚, yâ‚, 0]                                               â”‚
â”‚    [xâ‚‚, yâ‚‚, 0]                                               â”‚
â”‚    [xâ‚ƒ, yâ‚ƒ, 1]  â† Fin de trait                             â”‚
â”‚    [xâ‚„, yâ‚„, 0]                                               â”‚
â”‚    ...                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ã‰TAPE 2: Normalisation et Centrage                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. Calculer min/max:                                       â”‚
â”‚     min_x, min_y = min(coords)                              â”‚
â”‚     max_x, max_y = max(coords)                              â”‚
â”‚                                                              â”‚
â”‚  2. Calculer scale:                                         â”‚
â”‚     scale = min(target_size/width, target_size/height)      â”‚
â”‚                                                              â”‚
â”‚  3. Centrer et redimensionner:                               â”‚
â”‚     coords = (coords - [min_x, min_y]) * scale + padding   â”‚
â”‚                                                              â”‚
â”‚  RÃ©sultat: CoordonnÃ©es dans [0, 128]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ã‰TAPE 3: Dessin avec PIL                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  img = Image.new('L', (128, 128), color=255)  # Fond blanc    â”‚
â”‚  draw = ImageDraw.Draw(img)                                 â”‚
â”‚                                                              â”‚
â”‚  Pour chaque trait (sÃ©parÃ© par eos=1):                       â”‚
â”‚    points = coords[start:end, :2]                           â”‚
â”‚    draw.line(points, fill=0, width=2)  # Noir              â”‚
â”‚                                                              â”‚
â”‚  RÃ©sultat: Image PIL 128Ã—128 (niveaux de gris)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ã‰TAPE 4: Transformation PyTorch                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  transform = Compose([                                      â”‚
â”‚      ToTensor(),        # [0,255] â†’ [0,1]                   â”‚
â”‚      Normalize(0.5, 0.5)  # [0,1] â†’ [-1,1]                 â”‚
â”‚  ])                                                          â”‚
â”‚                                                              â”‚
â”‚  RÃ©sultat: Tensor (1, 128, 128) dans [-1, 1]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Pipeline d'Ã‰valuation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PIPELINE D'Ã‰VALUATION                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. PRÃ‰PARATION
   â”‚
   â”œâ”€ prepare_evaluation_data.py
   â”‚  â”‚
   â”‚  â”œâ”€ Charger donnÃ©es IAM
   â”‚  â”‚
   â”‚  â”œâ”€ Pour chaque Ã©chantillon:
   â”‚  â”‚  â”‚
   â”‚  â”‚  â”œâ”€ GÃ©nÃ©rer image RÃ‰ELLE
   â”‚  â”‚  â”‚  â””â”€ drawing.draw(strokes) â†’ evaluation/real/
   â”‚  â”‚  â”‚
   â”‚  â”‚  â””â”€ GÃ©nÃ©rer image GÃ‰NÃ‰RÃ‰E
   â”‚  â”‚     â””â”€ renderer.render(text) â†’ evaluation/gen/
   â”‚  â”‚
   â”‚  â””â”€ Sauvegarder paires d'images
   â”‚
   â–¼

2. CALCUL DES MÃ‰TRIQUES
   â”‚
   â”œâ”€ evaluate_metrics.py
   â”‚  â”‚
   â”‚  â”œâ”€ Charger images rÃ©elles et gÃ©nÃ©rÃ©es
   â”‚  â”‚
   â”‚  â”œâ”€ MÃ©triques visuelles:
   â”‚  â”‚  â”œâ”€ FID (FrÃ©chet Inception Distance)
   â”‚  â”‚  â”‚  â””â”€ Inception v3 â†’ Features â†’ Distance FrÃ©chet
   â”‚  â”‚  â”‚
   â”‚  â”‚  â””â”€ KID (Kernel Inception Distance)
   â”‚  â”‚     â””â”€ Inception v3 â†’ Features â†’ Kernel polynomial
   â”‚  â”‚
   â”‚  â”œâ”€ MÃ©triques de texte:
   â”‚  â”‚  â”œâ”€ CER (Character Error Rate)
   â”‚  â”‚  â”‚  â””â”€ OCR â†’ Texte â†’ Distance Levenshtein
   â”‚  â”‚  â”‚
   â”‚  â”‚  â””â”€ WER (Word Error Rate)
   â”‚  â”‚     â””â”€ OCR â†’ Mots â†’ Distance Levenshtein
   â”‚  â”‚
   â”‚  â””â”€ MÃ©triques de similaritÃ©:
   â”‚     â”œâ”€ SSIM (Structural Similarity)
   â”‚     â”œâ”€ PSNR (Peak Signal-to-Noise Ratio)
   â”‚     â””â”€ LPIPS (Learned Perceptual Similarity)
   â”‚
   â–¼

3. RAPPORT
   â”‚
   â””â”€ Sauvegarde JSON
      â””â”€ metrics_results.json
```

---

## Comparaison des Deux Approches

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GAN vs RENDU STYLISÃ‰                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GAN (cGAN)         â”‚    â”‚  RENDU STYLISÃ‰       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚    â”‚                      â”‚
â”‚ âœ“ Style variable     â”‚    â”‚ âœ“ ContrÃ´le prÃ©cis    â”‚
â”‚ âœ“ Apprentissage      â”‚    â”‚ âœ“ Rapide             â”‚
â”‚ âœ“ RÃ©aliste           â”‚    â”‚ âœ“ Pas d'entraÃ®nementâ”‚
â”‚                      â”‚    â”‚ âœ“ Personnalisable   â”‚
â”‚ âœ— NÃ©cessite          â”‚    â”‚                      â”‚
â”‚   entraÃ®nement       â”‚    â”‚ âœ— Style limitÃ©      â”‚
â”‚ âœ— Lent (inference)   â”‚    â”‚ âœ— Moins rÃ©aliste     â”‚
â”‚ âœ— Moins contrÃ´lable â”‚    â”‚    (selon police)    â”‚
â”‚                      â”‚    â”‚                      â”‚
â”‚ Utilisation:         â”‚    â”‚ Utilisation:         â”‚
â”‚ - GÃ©nÃ©ration         â”‚    â”‚ - Prototypage       â”‚
â”‚   crÃ©ative           â”‚    â”‚ - Applications       â”‚
â”‚ - Style unique       â”‚    â”‚   production         â”‚
â”‚                      â”‚    â”‚ - Personnalisation  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Format des DonnÃ©es Ã  Chaque Ã‰tape

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FORMAT DES DONNÃ‰ES                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. DONNÃ‰ES BRUTES (IAM)
   â”‚
   â”œâ”€ XML Strokes:
   â”‚  <Point x="100" y="200"/>
   â”‚  â†’ CoordonnÃ©es absolues
   â”‚
   â””â”€ ASCII:
      "Hello World"
      â†’ Texte brut

2. APRÃˆS PRÃ‰TRAITEMENT
   â”‚
   â”œâ”€ x.npy: (N, 1200, 3)
   â”‚  [[dx, dy, eos], ...]
   â”‚  â†’ Offsets normalisÃ©s
   â”‚
   â””â”€ c.npy: (N, 75)
      [char_idx1, char_idx2, ...]
      â†’ Indices de caractÃ¨res

3. DANS LE DATASET
   â”‚
   â”œâ”€ Image: (1, 128, 128)
   â”‚  Tensor dans [-1, 1]
   â”‚  â†’ Image PIL convertie
   â”‚
   â””â”€ Text: (20,)
      [idx1, idx2, ..., 0, 0, 0]
      â†’ Indices padding Ã  20

4. ENTRÃ‰E DU GAN
   â”‚
   â”œâ”€ Noise: (B, 100)
   â”‚  â†’ Vecteur alÃ©atoire
   â”‚
   â””â”€ Text: (B, 20)
      â†’ Indices de caractÃ¨res

5. SORTIE DU GAN
   â”‚
   â””â”€ Image: (B, 1, 128, 128)
      â†’ Tensor dans [-1, 1]
```

---

## Workflow Utilisateur

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WORKFLOW UTILISATEUR                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UTILISATEUR
    â”‚
    â”œâ”€ Option 1: Interface Streamlit (Rendu stylisÃ©)
    â”‚  â”‚
    â”‚  â””â”€ streamlit_app.py
    â”‚     â”‚
    â”‚     â”œâ”€ Saisie texte
    â”‚     â”œâ”€ Choix police
    â”‚     â”œâ”€ ParamÃ¨tres style
    â”‚     â””â”€ GÃ©nÃ©ration instantanÃ©e
    â”‚
    â”œâ”€ Option 2: Interface GAN
    â”‚  â”‚
    â”‚  â””â”€ GAN/app.py
    â”‚     â”‚
    â”‚     â”œâ”€ Chargement modÃ¨le entraÃ®nÃ©
    â”‚     â”œâ”€ Saisie texte
    â”‚     â””â”€ GÃ©nÃ©ration via GAN
    â”‚
    â””â”€ Option 3: Scripts Python
       â”‚
       â”œâ”€ GÃ©nÃ©ration programmatique
       â”œâ”€ Ã‰valuation mÃ©triques
       â””â”€ PrÃ©paration donnÃ©es
```

---

Ce diagramme complÃ¨te le guide d'architecture en fournissant des reprÃ©sentations visuelles du pipeline complet du projet.

